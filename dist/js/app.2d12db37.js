(function(e){function t(t){for(var r,i,a=t[0],c=t[1],u=t[2],d=0,f=[];d<a.length;d++)i=a[d],o[i]&&f.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={1:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;s.push([5,0]),n()})({5:function(e,t,n){e.exports=n("Vtdi")},"9kOW":function(e,t,n){"use strict";var r=n("fvxO"),o=n.n(r);o.a},"9uRm":function(e,t,n){},Vtdi:function(e,t,n){"use strict";n.r(t);n("VRzm"),n("9uRm");var r=n("Kw5r"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Escape")],1)},s=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"escape"},[e._m(0),n("Form",{attrs:{dialogFormVisible:e.showForm},on:{onSubmitSuccess:e.onFormSubmit}})],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"preload"}},[n("img",{attrs:{src:"img/loading.gif"}}),n("img",{attrs:{src:"img/loading-text.png"}})]),n("div",{attrs:{id:"gameWindow"}},[n("canvas",{attrs:{id:"gjs-canvas"}}),n("div",{attrs:{id:"gameEnd"}})])])}],c=(n("bHtr"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form"},[n("el-dialog",{attrs:{title:"请填写游戏账号",visible:e.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"status-icon":""}},[n("el-form-item",{attrs:{label:"Neb 钱包地址","label-width":e.formLabelWidth,prop:"address"}},[n("el-input",{attrs:{"auto-complete":"off",placeholder:"输入钱包地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)}),u=[],l={props:{dialogFormVisible:{type:Boolean,default:!1}},data:function(){var e=function(e,t,n){if(!t)return n(new Error("钱包地址不能为空"));setTimeout(function(){Account.isValidAddress(t)?n():n(new Error("请输入正确钱包地址"))},1e3)};return{form:{address:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",rules:{address:[{validator:e,trigger:"blur"}]}}},mounted:function(){},methods:{show:function(){this.dialogFormVisible=!0},submitForm:function(){var e=this;this.$refs["form"].validate(function(t){if(!t)return!1;e.$emit("onSubmitSuccess",e.form)})},resetForm:function(){this.$refs["form"].resetFields()}}},d=l,f=(n("aG1P"),n("KHd+")),m=Object(f["a"])(d,c,u,!1,null,"149f7948",null),p=m.exports,g={props:{msg:String},data:function(){return{showForm:!1}},mounted:function(){this.init()},created:function(){},methods:{init:function(){var e=this;this.getAccountInfo().then(function(t){return e.fetchLevel(t)}).then(function(t){console.log("getAccountInfo res: ",t);var n=t.level;e.initGame(n)}).catch(function(e){console.error("error:",e)})},getAccountInfo:function(){var e=this.getAddress();return e?Promise.resolve(e):this.callForm()},callForm:function(){var e=this;return new Promise(function(t,n){e.showForm=!0,e.$on("callFormSuss",function(r){var o=r.address;o?(e.setAccount(o),e.showForm=!1,t(o)):n(r)})})},onFormSubmit:function(e){this.$emit("callFormSuss",e)},fetchLevel:function(e){var t=e,n=[],r={from:t,to:DappAddress,value:0,nonce:0,gasPrice:1e6,gasLimit:2e6,contract:{function:"get",args:JSON.stringify(n)}};return neb.api.call(r).then(function(e){var t=e.result;if(console.log("return of rpc call: "+JSON.stringify(t)),"null"===t)return null;try{t=JSON.parse(t)}catch(e){}return t.level?t:null}).catch(function(e){console.error("error:"+e.message)})},initGame:function(e){var t=this;this.gamejs=window.gamejs,this.gamejs.ready(function(){var n=t;t.gamejs.display.setMode([800,600]);include_once(["lib/startMenu.js"]);var r=t.gamejs.display.getSurface(),o=new startMenu(e),s=function(e){r.fill("#FFFFFF"),o.handleInput(r),o.update(e),o.draw(r)};$("body").keydown(function(e){if($("#game_scorecard").is(":visible"))switch(e.keyCode){case 13:case 69:$("#game_scorecard .nextLevel").click(),e.preventDefault();break;case 27:$("#game_scorecard .mainMenu").click(),e.preventDefault();break;case 82:$("#game_scorecard .resetLevel").click(),e.preventDefault();break}}),$("#preload").remove(),$("#gameWindow").show(),t.gamejs.time.fpsCallback(s,n,60)})},getAddress:function(){var e=this.address||localStorage.getItem("neb_account_addr");return Account.isValidAddress(e)?e:null},setAccount:function(e){return!!Account.isValidAddress(e)&&(this.account=Account.fromAddress(e),this.address=this.account.getAddressString(),localStorage.setItem("neb_account_addr",this.address),this.account)}},components:{Form:p}},v=g,h=(n("9kOW"),Object(f["a"])(v,i,a,!1,null,"ecadd99c",null)),b=h.exports,w={components:{Escape:b}},_=w,F=(n("ZCWV"),Object(f["a"])(_,o,s,!1,null,null,null)),y=F.exports,k=n("jE9Z"),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"})},A=[],L={name:"home",components:{}},O=L,S=Object(f["a"])(O,j,A,!1,null,null,null),x=S.exports,E=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},V=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("This is an about page")])])}],C={},I=Object(f["a"])(C,E,V,!1,null,null,null),P=I.exports;r["default"].use(k["a"]);var M=new k["a"]({mode:"history",routes:[{path:"/",name:"home",component:x},{path:"/about",name:"about",component:P}]});M.beforeEach(function(e,t,n){n()});var W=M,J=n("L2JU"),N={state:{info:null,macdList:null},getters:{getUserInfo:function(e){return e.info},getMacdList:function(e){return e.macdList}},mutations:{updateUserInfo:function(e,t){e.info=t.info},updateMacdList:function(e,t){e.macdList=t.macdList}}},D=N;r["default"].use(J["a"]);var Z=new J["a"].Store({state:{isLoading:!1},getters:{getIsLoading:function(e){return e.isLoading}},mutations:{updateLoadingStatus:function(e,t){e.isLoading=t.isLoading}},actions:{},modules:{user:D}}),G=Z,T=n("lIOY");Object(T["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var R=n("XJYT"),U=n.n(R);n("D66Q");r["default"].use(U.a),r["default"].config.productionTip=!1,new r["default"]({router:W,store:G,render:function(e){return e(y)}}).$mount("#app"),window.Vue=r["default"]},ZCWV:function(e,t,n){"use strict";var r=n("tfSZ"),o=n.n(r);o.a},aG1P:function(e,t,n){"use strict";var r=n("v3bk"),o=n.n(r);o.a},fvxO:function(e,t,n){},tfSZ:function(e,t,n){},v3bk:function(e,t,n){}});
//# sourceMappingURL=app.2d12db37.js.map