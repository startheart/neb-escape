<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
        <link media="screen" href="css/main.css" rel="stylesheet" type="text/css" />

        <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
        <link rel="apple-touch-icon" sizes="114x114" href="img/touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="img/touch-icon-72x72.png" />
        <link rel="apple-touch-icon" href="img/touch-icon-iphone.png" />

        <script src="js/neb/nebPay.js"></script>
        <script src="js/neb/nebulas.js"></script>
        <script>
            var NebPay = require("nebpay");
            var Nebulas = require("nebulas");
            var Neb = Nebulas.Neb;
            var HttpRequest = Nebulas.HttpRequest;
            var Account = Nebulas.Account;
            var Transaction = Nebulas.Transaction;
            var Unit = Nebulas.Unit;

            var nebPay = new NebPay()
            // 主网合约地址
            var DappAddress = 'n1iAbvPQYWZepMmA7reF3JxLCCguagkr5oU'
            // 交易hash: c539e2c543242ba202b26c2ae41842cb26feceb958295f2fe2a29c9806e52748
            // 数据eyJTb3VyY2VUeXBlIjoianMiLCJTb3VyY2UiOiJcInVzZSBzdHJpY3RcIjtcblxudmFyIEFjY291bnQgPSBmdW5jdGlvbih0ZXh0KSB7XG4gIGlmICh0ZXh0KSB7XG4gICAgdmFyIG9iaiA9IEpTT04ucGFyc2UodGV4dCk7XG4gICAgdGhpcy5hZGRyZXNzID0gb2JqLmFkZHJlc3M7XG4gICAgdGhpcy5sZXZlbCA9IG9iai5sZXZlbDtcbiAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWRkcmVzcyA9IFwiXCI7XG4gICAgICB0aGlzLmxldmVsID0gXCJcIjtcbiAgfVxufTtcblxuQWNjb3VudC5wcm90b3R5cGUgPSB7XG4gIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMpO1xuICB9XG59O1xuXG52YXIgRXNjYXBlID0gZnVuY3Rpb24gKCkge1xuICAgIExvY2FsQ29udHJhY3RTdG9yYWdlLmRlZmluZU1hcFByb3BlcnR5KHRoaXMsIFwiYWNjb3VudHNcIiwge1xuICAgICAgICBwYXJzZTogZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWNjb3VudCh0ZXh0KTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgcmV0dXJuIG8udG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuRXNjYXBlLnByb3RvdHlwZSA9IHtcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHRvZG9cbiAgICB9LFxuXG4gICAgc2F2ZTogZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICB2YXIgYWRkcmVzcyA9IEJsb2NrY2hhaW4udHJhbnNhY3Rpb24uZnJvbTtcbiAgICAgIHZhciBhY2NvdW50ID0gdGhpcy5hY2NvdW50cy5nZXQoYWRkcmVzcyk7XG5cbiAgICAgIGlmICghYWNjb3VudCl7XG4gICAgICAgICAgYWNjb3VudCA9IG5ldyBBY2NvdW50KClcbiAgICAgICAgICBhY2NvdW50LmFkZHJlc3MgPSBhZGRyZXNzXG4gICAgICB9XG5cbiAgICAgIGFjY291bnQubGV2ZWwgPSBsZXZlbFxuXG4gICAgICB0aGlzLmFjY291bnRzLnB1dChhZGRyZXNzLCBhY2NvdW50KTtcblxuICAgICAgcmV0dXJuIGFjY291bnRcbiAgICB9LFxuXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhZGRyZXNzID0gQmxvY2tjaGFpbi50cmFuc2FjdGlvbi5mcm9tO1xuICAgICAgICB2YXIgYWNjb3VudCA9IHRoaXMuYWNjb3VudHMuZ2V0KGFkZHJlc3MpO1xuXG4gICAgICAgIGlmICghYWNjb3VudCl7XG4gICAgICAgICAgICBhY2NvdW50ID0gbmV3IEFjY291bnQoKVxuICAgICAgICAgICAgYWNjb3VudC5hZGRyZXNzID0gYWRkcmVzc1xuICAgICAgICAgICAgYWNjb3VudC5sZXZlbCA9ICcxJ1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFjY291bnRcbiAgICB9XG59O1xubW9kdWxlLmV4cG9ydHMgPSBFc2NhcGU7XG4iLCJBcmdzIjoiIn0=
            // var DappAddress = 'n1fQ53WHiBK2cmAK6WHnUZfpx7Q7pwHb7Ri'
            // var DappAddress = 'n1pjfduA2k517P2n1XPN16xLJMYHbtW9yuV'

            var neb = new Neb();
            var nas_rate = 1000000000000000000;

            var nebChainUrl = 'https://mainnet.nebulas.io'
            // var nebChainUrl = 'https://testnet.nebulas.io'

            neb.setRequest(new HttpRequest(nebChainUrl));

            //var glob_chainID = 1001;

            var glob_chainID = 1;
            Date.prototype.format = function(fmt) {
                var o = {
                    "M+": this.getMonth() + 1, //月份
                    "d+": this.getDate(), //日
                    "h+": this.getHours(), //小时
                    "m+": this.getMinutes(), //分
                    "s+": this.getSeconds(), //秒
                    "q+": Math.floor((this.getMonth() + 3) / 3), //季度
                    "S": this.getMilliseconds() //毫秒
                };
                if (/(y+)/.test(fmt)) {
                    fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
                }
                for (var k in o) {
                    if (new RegExp("(" + k + ")").test(fmt)) {
                        fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
                    }
                }
                return fmt;
            }
        </script>

        <script type="text/javascript" src="js/jquery-1.8.2.js"></script>
        <script type="text/javascript" src="js/gamejs/yabble.js"></script>
        <script type="text/javascript" src="js/gamejs/gamejs.min.js"></script>
        <script type="text/javascript" src="js/lib/utils.js"></script>
        <script type="text/javascript">
            var gamejs;
            $(document).ready(function(){
                require.setModuleRoot('./js/');
                require.run('main');
            });
        </script>
        <title>Neb's 逃跑计划</title>
    </head>
    <body>
        <div id="app"></div>
        <!-- built files will be auto injected -->
    </body>
</html>
